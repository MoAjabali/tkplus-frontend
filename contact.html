<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" dir="rtl">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="css/all.min.css">
    <link rel="stylesheet" href="css/main-master.css">
    <link href="assets/icon.ico" rel="icon" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Changa:wght@200..800&family=Tajawal:wght@200;300;400;500;700;800;900&display=swap" rel="stylesheet">
    <title>Tathkira+ | تواصل بنا</title>
  </head>
  <body class="bg-background-light dir-rtl">
    <header class="flex flex-jc-space-btw p-1 flex-ai-center dir-rtl border">
      <div>
        <img src="assets/tkplus.svg" class="w-6" alt="" srcset="">
      </div>

      <nav class="flex gap-1">
        <a href="./events.html" class="color-content-light hover-primary hover-transitions">الفعاليات</a>
        <a href="./tickets.html" class="color-content-light hover-primary hover-transitions">تذاكري</a>
        <a href="./contact.html" class="bold color-content-light hover-primary hover-transitions">تواصل بنا</a>
      </nav>

      <section class="flex gap-1 f-1">
        <a href="./cart.html" class="bold color-content-light hover-primary hover-transitions relative"><i class="fas fa-shopping-cart"></i> 
            <snap id="cart-badge" class="p-025 absolute bg-primary rounded-full color-content-dark hide"></snap> </a>
        <a href="./profile.html" class="bold color-content-light hover-primary hover-transitions"><i class="fas fa-user-circle"></i>
        </a>
      </section>
    </header>
  
    <main class="flex flex-ai-center flex-jc-center">
      <section class="container margin-x">
        <div class="text-center">
          <h2 class="f-3 bold color-content-light m-0">تواصل بنا</h2>
          <p class="f-125 color-content-light m-2">نحن نرحب بأسئلتكم واستفساراتكم</p>
        </div>
        <form method="POST" class="bg-subtle-light p-8 rounded-1 flex flex-direction-c gap-1" id="contact-form">
          <div class="flex flex-direction-c gap-1">
            <div>
              <input class="w-full p-1 rounded-1 border-subtle-light-1 bg-background-light" id="name" name="name" placeholder="الاسم" required type="text"/>
            </div>
            <div>
              <input class="w-full p-1 rounded-1 border-subtle-light-1 bg-background-light" id="email" name="email" placeholder="البريد الإلكتروني" required type="email"/>
            </div>
            <div>
              <textarea class="w-full p-1 rounded-1 border-subtle-light-1 bg-background-light" id="message" name="message" placeholder="رسالتك" required rows="4"></textarea>
            </div>
          </div>
          <div>
            <button class="w-full btn bg-primary color-content-dark bold rounded-1 hover-transitions" id="submit-btn" type="submit">
              إرسال
            </button>
          </div>
        </form>
      </section>
      <div id="notification-container"></div>
    </main>

    <footer class="flex flex-direction-c gap-1 p-2 bg-subtle-light" >
      <ul class="ul-none flex flex-jc-center gap-1 color-content-light m-0 p-0">
        <li class="hover-primary hover-transitions"><a href="">Privacy Policy</a></li>
        <li class="hover-primary hover-transitions"><a href="">Terms of Service</a></li>
        <li class="hover-primary hover-transitions"><a href="">Contact Us</a></li>
      </ul>
      <section class="flex flex-jc-center gap-1 text-center color-content-light">
        <a href=""><i class="fab fa-facebook hover-primary hover-transitions"></i></a>
        <a href=""><i class="fab fa-instagram hover-primary hover-transitions"></i></a>
        <a href=""><i class="fab fa-twitter hover-primary hover-transitions"></i></a>
      </section>
      <p class="bold color-content-light text-center m-0">
        كل الحقوق محفوظة لدي
        <sub><img src="assets/tkplus.svg" class="w-4" alt="" srcset=""></sub>
        <sup>&copy;</sup>
      </p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script type="module" src="./js/pages/contact.js"></script>
    <script>
      // Notifications
      function showNotification(message, type) {
      const notify = document.createElement("div");
      notify.classList.add("notification", type, "p-1", "rounded-05", "color-content-dark", "flex", "flex-ai-center", "dir-rtl", "gap-1", "bold", "f-1");

      const icon = document.createElement("i");
      if(type === "success") icon.className = "fa-solid fa-circle-check";
      else if(type === "error") icon.className = "fa-solid fa-circle-xmark";

      notify.appendChild(icon);

      const text = document.createElement("span");
      text.innerText = message;
      notify.appendChild(text);

      document.getElementById("notification-container").appendChild(notify);

      setTimeout(() => notify.classList.add("show"), 10);

      setTimeout(() => {
        notify.classList.remove("show");
        setTimeout(() => notify.remove(), 300);
      }, 3000);
    }
      // تهيئة EmailJS
      emailjs.init("4Y5kn0eEfo-pY0CYR");
      (function() {
        emailjs.init("4Y5kn0eEfo-pY0CYR"); // ضع مفتاحك هنا
      })();

      const form = document.getElementById("contact-form");
      const submitBtn = document.getElementById("submit-btn");

      submitBtn.addEventListener("click", async (e) => {
        e.preventDefault();
        submitBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i>';
        submitBtn.disabled = true;
        try {
          const result = await emailjs.sendForm(
            "service_bbkhych",
            "template_wckeyli",
            form
          );
          showNotification("تم إرسال الرسالة بنجاح!", "success");
          form.reset();
        } catch (error) {
          console.error(error);
          showNotification("حدث خطأ أثناء الإرسال. حاول مرة أخرى.", "error");
        }
        submitBtn.innerHTML = "إرسال";
        submitBtn.disabled = false;
      });
    </script>

  </body>
</html>